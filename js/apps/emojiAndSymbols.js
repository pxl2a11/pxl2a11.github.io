let timeoutId;
const RECENT_SYMBOLS_KEY = 'recentSymbols';
const RECENT_EMOJI_KEY = 'recentEmojis';
const RECENT_LIMIT = 20;

function getRecent(key) {
    return JSON.parse(localStorage.getItem(key)) || [];
}

function addToRecent(key, symbol) {
    let recent = getRecent(key);
    recent = recent.filter(item => item.c !== symbol.c); // c = copy
    recent.unshift(symbol);
    if (recent.length > RECENT_LIMIT) {
        recent.pop();
    }
    localStorage.setItem(key, JSON.stringify(recent));
}

export function getHtml() {
    return `
        <style>
            .tab-btn { color: #6B7280; border-color: transparent; transition: all 0.2s ease-in-out; }
            .dark .tab-btn { color: #9CA3AF; }
            .tab-btn.active { color: white; background-color: #3B82F6; border-color: #3B82F6; border-radius: 0.5rem 0.5rem 0 0; }
            .dark .tab-btn.active { background-color: #60A5FA; color: #1F2937; border-color: #60A5FA; }
             .tab-btn:not(.active):hover { color: #1F2937; border-color: #D1D5DB; }
             .dark .tab-btn:not(.active):hover { color: #F9FAFB; border-color: #4B5563; }
        </style>
        <div class="p-4 space-y-4">
            <div id="copy-notification" class="fixed top-24 left-1/2 -translate-x-1/2 bg-green-500 text-white py-2 px-4 rounded-full shadow-lg opacity-0 transition-opacity duration-300 z-50">–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!</div>
            <div class="relative mb-4">
                <input type="search" id="symbol-search" placeholder="–ü–æ–∏—Å–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–µ—Ä–¥—Ü–µ, —Å—Ç—Ä–µ–ª–∫–∞, money...)" class="w-full p-3 pl-10 border rounded-full bg-gray-50 dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500">
                <svg class="absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
            </div>
            <div class="flex border-b border-gray-300 dark:border-gray-600">
                <button id="symbols-tab" class="tab-btn py-2 px-4 font-semibold border-b-2 active">–°–∏–º–≤–æ–ª—ã</button>
                <button id="emoji-tab" class="tab-btn py-2 px-4 font-semibold border-b-2">–≠–º–æ–¥–∑–∏</button>
            </div>
            <div id="symbols-content"></div>
            <div id="emoji-content" class="hidden"></div>
        </div>
    `;
}

export function init() {
    const symbolsData = {
        '–ù–µ–¥–∞–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ': getRecent(RECENT_SYMBOLS_KEY),
        '–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ': [{s:'‚úì',k:'–≥–∞–ª–æ—á–∫–∞ check'}, {s:'‚úó',k:'–∫—Ä–µ—Å—Ç–∏–∫ x'}, {s:'‚òÖ',k:'–∑–≤–µ–∑–¥–∞ star'}, {s:'‚òÜ',k:'–∑–≤–µ–∑–¥–∞ star'}, {s:'‚ô•',k:'—Å–µ—Ä–¥—Ü–µ heart love'}, {s:'‚ÇΩ',k:'—Ä—É–±–ª—å'}, {s:'‚Ç¨',k:'–µ–≤—Ä–æ'}, {s:'$',k:'–¥–æ–ª–ª–∞—Ä'}, {s:'‚Üí',k:'—Å—Ç—Ä–µ–ª–∫–∞ –≤–ø—Ä–∞–≤–æ right arrow'}, {s:'‚Üê',k:'—Å—Ç—Ä–µ–ª–∫–∞ –≤–ª–µ–≤–æ left arrow'}, {s:'¬©',k:'–∫–æ–ø–∏—Ä–∞–π—Ç copyright'}, {s:'‚Ñ¢',k:'—Ç–º trademark'}],
        '–í–∞–ª—é—Ç—ã': [{s:'‚Ç¨',k:'–µ–≤—Ä–æ euro'}, {s:'¬£',k:'—Ñ—É–Ω—Ç pound'}, {s:'¬•',k:'–π–µ–Ω–∞ yen'}, {s:'‚ÇΩ',k:'—Ä—É–±–ª—å ruble'}, {s:'‚Ç¥',k:'–≥—Ä–∏–≤–Ω–∞'}, {s:'$',k:'–¥–æ–ª–ª–∞—Ä dollar'}, {s:'¬¢',k:'—Ü–µ–Ω—Ç cent'}, {s:'‚Ç©',k:'–≤–æ–Ω won'}, {s:'‚Ç™',k:'—à–µ–∫–µ–ª—å shekel'}, {s:'‚ÇÆ',k:'—Ç—É–≥—Ä–∏–∫'}, {s:'‚Çπ',k:'—Ä—É–ø–∏—è rupee'}, {s:'‚Çø',k:'–±–∏—Ç–∫–æ–∏–Ω bitcoin'}, {s:'‚Ç£',k:'—Ñ—Ä–∞–Ω–∫ franc'}, {s:'‚Ç§',k:'–ª–∏—Ä–∞ lira'}, {s:'‚Çß',k:'–ø–µ—Å–µ—Ç–∞'}],
        '–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ': [{s:'‚âà',k:'–ø—Ä–∏–º–µ—Ä–Ω–æ'}, {s:'‚â†',k:'–Ω–µ —Ä–∞–≤–Ω–æ'}, {s:'‚â§',k:'–º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ'}, {s:'‚â•',k:'–±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ'}, {s:'√∑',k:'–¥–µ–ª–µ–Ω–∏–µ'}, {s:'√ó',k:'—É–º–Ω–æ–∂–µ–Ω–∏–µ'}, {s:'‚àí',k:'–º–∏–Ω—É—Å'}, {s:'+',k:'–ø–ª—é—Å'}, {s:'‚àû',k:'–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å'}, {s:'œÄ',k:'–ø–∏'}, {s:'‚àö',k:'–∫–æ—Ä–µ–Ω—å'}, {s:'‚à´',k:'–∏–Ω—Ç–µ–≥—Ä–∞–ª'}, {s:'‚àë',k:'—Å—É–º–º–∞'}, {s:'‚àÇ',k:'–¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª'}, {s:'‚àÖ',k:'–ø—É—Å—Ç–æ–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ'}, {s:'¬±',k:'–ø–ª—é—Å-–º–∏–Ω—É—Å'}, {s:'¬∞',k:'–≥—Ä–∞–¥—É—Å'}, {s:'¬π',k:'1 —Å—Ç–µ–ø–µ–Ω—å'}, {s:'¬≤',k:'2 —Å—Ç–µ–ø–µ–Ω—å'}, {s:'¬≥',k:'3 —Å—Ç–µ–ø–µ–Ω—å'}, {s:'¬µ',k:'–º—é –º–∏–∫—Ä–æ'}, {s:'‚àÜ',k:'–¥–µ–ª—å—Ç–∞'}, {s:'¬º',k:'–æ–¥–Ω–∞ —á–µ—Ç–≤–µ—Ä—Ç—å'}, {s:'¬Ω',k:'–æ–¥–Ω–∞ –≤—Ç–æ—Ä–∞—è'}, {s:'¬æ',k:'—Ç—Ä–∏ —á–µ—Ç–≤–µ—Ä—Ç–∏'}],
        '–°—Ç—Ä–µ–ª–∫–∏': [{s:'‚Üê',k:'—Å—Ç—Ä–µ–ª–∫–∞ –≤–ª–µ–≤–æ'}, {s:'‚Üë',k:'—Å—Ç—Ä–µ–ª–∫–∞ –≤–≤–µ—Ä—Ö'}, {s:'‚Üí',k:'—Å—Ç—Ä–µ–ª–∫–∞ –≤–ø—Ä–∞–≤–æ'}, {s:'‚Üì',k:'—Å—Ç—Ä–µ–ª–∫–∞ –≤–Ω–∏–∑'}, {s:'‚Üî',k:'—Å—Ç—Ä–µ–ª–∫–∞ –≤–ª–µ–≤–æ –≤–ø—Ä–∞–≤–æ'}, {s:'‚Üï',k:'—Å—Ç—Ä–µ–ª–∫–∞ –≤–≤–µ—Ä—Ö –≤–Ω–∏–∑'}, {s:'‚Üñ',k:'—Å—Ç—Ä–µ–ª–∫–∞ –≤–≤–µ—Ä—Ö –≤–ª–µ–≤–æ'}, {s:'‚Üó',k:'—Å—Ç—Ä–µ–ª–∫–∞ –≤–≤–µ—Ä—Ö –≤–ø—Ä–∞–≤–æ'}, {s:'‚Üò',k:'—Å—Ç—Ä–µ–ª–∫–∞ –≤–Ω–∏–∑ –≤–ø—Ä–∞–≤–æ'}, {s:'‚Üô',k:'—Å—Ç—Ä–µ–ª–∫–∞ –≤–Ω–∏–∑ –≤–ª–µ–≤–æ'}, {s:'‚á¶',k:'—Å—Ç—Ä–µ–ª–∫–∞'}, {s:'‚áß',k:'—Å—Ç—Ä–µ–ª–∫–∞'}, {s:'‚á®',k:'—Å—Ç—Ä–µ–ª–∫–∞'}, {s:'‚á©',k:'—Å—Ç—Ä–µ–ª–∫–∞'}, {s:'‚û•',k:'—Å—Ç—Ä–µ–ª–∫–∞'}, {s:'‚Ü∂',k:'—Å—Ç—Ä–µ–ª–∫–∞'}, {s:'‚Ü∑',k:'—Å—Ç—Ä–µ–ª–∫–∞'}],
        '–ü—É–Ω–∫—Ç—É–∞—Ü–∏—è –∏ –ø—Ä–æ—á–µ–µ': [{s:'¬©',k:'–∫–æ–ø–∏—Ä–∞–π—Ç copyright'}, {s:'¬Æ',k:'–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ registered'}, {s:'‚Ñ¢',k:'—Ç–º trademark'}, {s:'¬ß',k:'–ø–∞—Ä–∞–≥—Ä–∞—Ñ'}, {s:'‚Ä¢',k:'—Ç–æ—á–∫–∞'}, {s:'‚Ä¶',k:'–º–Ω–æ–≥–æ—Ç–æ—á–∏–µ'}, {s:'‚Äì',k:'—Ç–∏—Ä–µ'}, {s:'‚Äî',k:'–¥–ª–∏–Ω–Ω–æ–µ —Ç–∏—Ä–µ'}, {s:'‚Äò',k:'–∫–∞–≤—ã—á–∫–∞'}, {s:'‚Äô',k:'–∫–∞–≤—ã—á–∫–∞'}, {s:'‚Äú',k:'–∫–∞–≤—ã—á–∫–∞'}, {s:'‚Äù',k:'–∫–∞–≤—ã—á–∫–∞'}, {s:'‚Äû',k:'–∫–∞–≤—ã—á–∫–∞'}, {s:'¬´',k:'–∫–∞–≤—ã—á–∫–∞'}, {s:'¬ª',k:'–∫–∞–≤—ã—á–∫–∞'}],
        '–§–∏–≥—É—Ä—ã –∏ –∑–Ω–∞–∫–∏': [{s:'‚òÖ',k:'–∑–≤–µ–∑–¥–∞ star'}, {s:'‚òÜ',k:'–∑–≤–µ–∑–¥–∞ star'}, {s:'‚úì',k:'–≥–∞–ª–æ—á–∫–∞ check'}, {s:'‚úó',k:'–∫—Ä–µ—Å—Ç–∏–∫ x'}, {s:'‚ô•',k:'—Å–µ—Ä–¥—Ü–µ heart'}, {s:'‚ô¶',k:'–±—É–±–Ω—ã'}, {s:'‚ô£',k:'—Ç—Ä–µ—Ñ—ã'}, {s:'‚ô†',k:'–ø–∏–∫–∏'}, {s:'‚ô™',k:'–Ω–æ—Ç–∞'}, {s:'‚ô´',k:'–Ω–æ—Ç–∞'}, {s:'‚óè',k:'–∫—Ä—É–≥'}, {s:'‚óã',k:'–∫—Ä—É–≥'}, {s:'‚ñ†',k:'–∫–≤–∞–¥—Ä–∞—Ç'}, {s:'‚ñ°',k:'–∫–≤–∞–¥—Ä–∞—Ç'}, {s:'‚ñ≤',k:'—Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫'}, {s:'‚ñº',k:'—Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫'}, {s:'‚óÑ',k:'—Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫'}, {s:'‚ñ∫',k:'—Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫'}, {s:'‚óâ',k:'–∫—Ä—É–≥'}, {s:'‚óä',k:'—Ä–æ–º–±'}, {s:'‚ó¶',k:'–∫—Ä—É–≥'}],
        '–ü—Ä–æ–±–µ–ª—ã': [ {d: '–ü—É—Å—Ç–æ–π', c: '\u00A0', t: '–ù–µ—Ä–∞–∑—Ä—ã–≤–Ω—ã–π –ø—Ä–æ–±–µ–ª', k: '–ø—É—Å—Ç–æ–π –Ω–µ—Ä–∞–∑—Ä—ã–≤–Ω—ã–π' }, {d: '–£–∑–∫–∏–π', c: '\u2009', t: '–£–∑–∫–∏–π –Ω–µ—Ä–∞–∑—Ä—ã–≤–Ω—ã–π –ø—Ä–æ–±–µ–ª', k: '—É–∑–∫–∏–π —Ç–æ–Ω–∫–∏–π' } ]
    };
    
    // –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü–û–õ–ù–ê–Ø –ë–ê–ó–ê –î–ê–ù–ù–´–• –ö–õ–Æ–ß–ï–í–´–• –°–õ–û–í –î–õ–Ø –í–°–ï–• –≠–ú–û–î–ó–ò
    const emojiKeywords = {'üòÄ':'–ª–∏—Ü–æ —É–ª—ã–±–∫–∞ happy smile face','üòÅ':'—É–ª—ã–±–∫–∞ –∑—É–±—ã grin','üòÇ':'—Å–º–µ—Ö —Å–ª–µ–∑—ã —Ä–∞–¥–æ—Å—Ç—å joy','ü§£':'–∫–∞—Ç–∞—é—Å—å –ø–æ –ø–æ–ª—É –æ—Ç —Å–º–µ—Ö–∞ rofl','üòÉ':'–±–æ–ª—å—à–∞—è —É–ª—ã–±–∫–∞ smiley','üòÑ':'—Å—á–∞—Å—Ç–ª–∏–≤—ã–π —Å–º–µ—Ö –≥–ª–∞–∑–∞ smile','üòÖ':'—É–ª—ã–±–∫–∞ –ø–æ—Ç sweat','üòÜ':'—â—É—Ä—è—Å—å laughing','üòâ':'–ø–æ–¥–º–∏–≥–∏–≤–∞–Ω–∏–µ wink','üòä':'—É–ª—ã–±–∫–∞ —Ä—É–º—è–Ω–µ—Ü blush','üòã':'–≤–∫—É—Å–Ω–æ —è–∑—ã–∫ yum','üòé':'–∫—Ä—É—Ç–æ–π –æ—á–∫–∏ cool sunglasses','üòç':'–≤–ª—é–±–ª–µ–Ω —Å–µ—Ä–¥—Ü–µ –≥–ª–∞–∑–∞ heart eyes','üòò':'–ø–æ—Ü–µ–ª—É–π kiss','ü•∞':'–ª—é–±–æ–≤—å —Å–µ—Ä–¥–µ—á–∫–∏ smiling face with hearts','üòó':'—Ü–µ–ª—É—é kissing','üòô':'—Ü–µ–ª—É—é —É–ª—ã–±–∫–∞','üòö':'—Ü–µ–ª—É—é –≥–ª–∞–∑–∞ –∑–∞–∫—Ä—ã—Ç—ã','üôÇ':'–ª–µ–≥–∫–∞—è —É–ª—ã–±–∫–∞','ü§ó':'–æ–±—ä—è—Ç–∏—è hugs','ü§©':'–∑–≤–µ–∑–¥—ã –≤ –≥–ª–∞–∑–∞—Ö –≤–æ—Å—Ç–æ—Ä–≥ star struck','ü§î':'–¥—É–º–∞—é —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–µ thinking','ü§®':'–±—Ä–æ–≤—å raised eyebrow','üòê':'–Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π neutral face','üòë':'–±–µ–∑ –≤—ã—Ä–∞–∂–µ–Ω–∏—è expressionless','üò∂':'–Ω–µ—Ç —Ä—Ç–∞ no mouth','üôÑ':'–∑–∞–∫–∞—Ç—ã–≤–∞—é –≥–ª–∞–∑–∞ roll eyes','üòè':'—É—Ö–º—ã–ª–∫–∞ smirk','üò£':'—Å—Ç—Ä–∞–¥–∞–Ω–∏–µ persevere','üò•':'–≥—Ä—É—Å—Ç–Ω—ã–π –ø–æ—Ç sad but relieved','üòÆ':'—É–¥–∏–≤–ª–µ–Ω–∏–µ —Ä–æ—Ç –æ—Ç–∫—Ä—ã—Ç face with open mouth','ü§ê':'—Ä–æ—Ç –Ω–∞ –∑–∞–º–∫–µ zipper mouth','üòØ':'—Ç–∏—Ö–æ hushed','üò™':'—Å–æ–Ω–Ω—ã–π sleepy','üò´':'—É—Å—Ç–∞–ª—ã–π tired','üò¥':'—Å–ø–ª—é sleeping','üòå':'–æ–±–ª–µ–≥—á–µ–Ω–∏–µ relieved','üòõ':'—è–∑—ã–∫ stuck out tongue','üòú':'—è–∑—ã–∫ –ø–æ–¥–º–∏–≥–∏–≤–∞—é wink tongue','üòù':'—è–∑—ã–∫ —â—É—Ä—é—Å—å squinting tongue','ü§§':'—Å–ª—é–Ω–∏ drooling','üòí':'–Ω–µ–¥–æ–≤–æ–ª—å–Ω—ã–π unamused','üòì':'—É–¥—Ä—É—á–µ–Ω–Ω—ã–π –ø–æ—Ç sweat','üòî':'–∑–∞–¥—É–º—á–∏–≤—ã–π pensive','üòï':'—Å–º—É—â–µ–Ω–Ω—ã–π confused','üôÉ':'–≤–≤–µ—Ä—Ö –Ω–æ–≥–∞–º–∏ upside down','ü§ë':'–¥–µ–Ω—å–≥–∏ —è–∑—ã–∫ money mouth','üò≤':'–∏–∑—É–º–ª–µ–Ω–∏–µ astonished','‚òπÔ∏è':'—Ö–º—É—Ä—ã–π frowning','üôÅ':'—Å–ª–µ–≥–∫–∞ —Ö–º—É—Ä—ã–π','üòñ':'—Å–º—è—Ç–µ–Ω–∏–µ confounded','üòû':'—Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ disappointed','üòü':'–±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ worried','üò§':'–ø–∞—Ä –∏–∑ –Ω–æ—Å–∞ –∑–ª–æ—Å—Ç—å triumph victory','üò¢':'–ø–ª–∞—á cry','üò≠':'—Ä—ã–¥–∞–Ω–∏–µ sob','üò¶':'—Ö–º—É—Ä—ã–π —Ä–æ—Ç –æ—Ç–∫—Ä—ã—Ç','üòß':'—Å—Ç—Ä–∞–¥–∞–Ω–∏–µ anguished','üò®':'—Å—Ç—Ä–∞—Ö fearful','üò©':'—É—Ç–æ–º–ª–µ–Ω–Ω—ã–π weary','ü§Ø':'–≤–∑—Ä—ã–≤ –º–æ–∑–≥ —à–æ–∫ exploding head','üò¨':'–≥—Ä–∏–º–∞—Å–∞ grimacing','üò∞':'—Ç—Ä–µ–≤–æ–≥–∞ –ø–æ—Ç anxious sweat','üò±':'–∫—Ä–∏–∫ —É–∂–∞—Å scream','ü•µ':'–∂–∞—Ä–∫–æ –∫—Ä–∞—Å–Ω—ã–π hot face','ü•∂':'—Ö–æ–ª–æ–¥–Ω–æ —Å–∏–Ω–∏–π cold face','üò≥':'—Ä—É–º—è–Ω–µ—Ü flushed','ü§™':'–¥—É—Ä–∞—á—É—Å—å zany face','üòµ':'–≥–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏–µ dizzy','üò°':'–Ω–∞–¥—É—Ç—ã–π –∫—Ä–∞—Å–Ω—ã–π –∑–ª–æ–π pouting enraged','üò†':'–∑–ª–æ—Å—Ç—å angry','ü§¨':'—Ä—É–≥–∞–Ω—å —Å–∏–º–≤–æ–ª—ã cursing','üò∑':'–º–∞—Å–∫–∞ medical mask','ü§í':'—Ç–µ—Ä–º–æ–º–µ—Ç—Ä –±–æ–ª—å–Ω–æ–π','ü§ï':'–±–∏–Ω—Ç —Ç—Ä–∞–≤–º–∞','ü§¢':'—Ç–æ—à–Ω–æ—Ç–∞ nauseated','ü§Æ':'—Ä–≤–æ—Ç–∞ vomiting','ü§ß':'—á–∏—Ö–∞–Ω–∏–µ sneezing','üòá':'–∞–Ω–≥–µ–ª –Ω–∏–º–± angel','ü§†':'–∫–æ–≤–±–æ–π cowboy','ü•≥':'–ø—Ä–∞–∑–¥–Ω–∏–∫ –≤–µ—á–µ—Ä–∏–Ω–∫–∞ partying','ü•¥':'–ø—å—è–Ω—ã–π woozy face','ü•∫':'—É–º–æ–ª—è—é pleading begging','ü§°':'–∫–ª–æ—É–Ω clown','ü§•':'–≤—Ä—É –Ω–æ—Å lying face','ü§´':'—Ç–∏—à–µ shushing face','ü§≠':'—Ä—É–∫–∞ —É —Ä—Ç–∞ —Ö–∏—Ö–∏–∫–∞—é hand over mouth','üßê':'–º–æ–Ω–æ–∫–ª—å face with monocle','ü§ì':'–±–æ—Ç–∞–Ω–∏–∫ –æ—á–∫–∏ nerd','üëã':'–ø—Ä–∏–≤–µ—Ç –º–∞—à—É —Ä—É–∫–æ–π wave','ü§ö':'–ø–æ–¥–Ω—è—Ç–∞—è —Ä—É–∫–∞','üñêÔ∏è':'—Ä–∞—Å–∫—Ä—ã—Ç–∞—è –ª–∞–¥–æ–Ω—å','‚úã':'–ø–æ–¥–Ω—è—Ç–∞—è –ª–∞–¥–æ–Ω—å','üññ':'–≤—É–ª–∫–∞–Ω—Å–∫–∏–π —Å–∞–ª—é—Ç spock','üëå':'–æ–∫ okay','ü§è':'—â–µ–ø–æ—Ç–∫–∞','‚úåÔ∏è':'–ø–æ–±–µ–¥–∞ –º–∏—Ä victory peace','ü§û':'—Å–∫—Ä–µ—â–µ–Ω–Ω—ã–µ –ø–∞–ª—å—Ü—ã —É–¥–∞—á–∞','ü§ü':'–ª—é–±–ª—é —Ç–µ–±—è I love you','ü§ò':'–∫–æ–∑–∞ rock','ü§ô':'–ø–æ–∑–≤–æ–Ω–∏ –º–Ω–µ call me','üëà':'–ø–∞–ª–µ—Ü –≤–ª–µ–≤–æ','üëâ':'–ø–∞–ª–µ—Ü –≤–ø—Ä–∞–≤–æ','üëÜ':'–ø–∞–ª–µ—Ü –≤–≤–µ—Ä—Ö','üñï':'—Å—Ä–µ–¥–Ω–∏–π –ø–∞–ª–µ—Ü','üëá':'–ø–∞–ª–µ—Ü –≤–Ω–∏–∑','‚òùÔ∏è':'—É–∫–∞–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞–ª–µ—Ü –≤–≤–µ—Ä—Ö','üëç':'–ª–∞–π–∫ –ø–∞–ª–µ—Ü –≤–≤–µ—Ä—Ö thumbs up','üëé':'–¥–∏–∑–ª–∞–π–∫ –ø–∞–ª–µ—Ü –≤–Ω–∏–∑ thumbs down','‚úä':'–∫—É–ª–∞–∫ raised fist','üëä':'—É–¥–∞—Ä oncoming fist','ü§õ':'–∫—É–ª–∞–∫ –≤–ª–µ–≤–æ','ü§ú':'–∫—É–ª–∞–∫ –≤–ø—Ä–∞–≤–æ','üëè':'–∞–ø–ª–æ–¥–∏—Å–º–µ–Ω—Ç—ã clapping','üôå':'–ø–æ–¥–Ω—è—Ç—ã–µ —Ä—É–∫–∏ praise','üëê':'–æ—Ç–∫—Ä—ã—Ç—ã–µ –ª–∞–¥–æ–Ω–∏','ü§≤':'–ª–∞–¥–æ–Ω–∏ –≤–º–µ—Å—Ç–µ','ü§ù':'—Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ','üôè':'–º–æ–ª–∏—Ç–≤–∞ —Å–ø–∞—Å–∏–±–æ folded hands please thank you','‚úçÔ∏è':'–ø–∏—à—É','üíÖ':'–º–∞–Ω–∏–∫—é—Ä','ü§≥':'—Å–µ–ª—Ñ–∏','üí™':'—Å–∏–ª–∞ –º—ã—à—Ü—ã bicep strong','ü¶æ':'–º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∞—è —Ä—É–∫–∞','ü¶µ':'–Ω–æ–≥–∞','ü¶ø':'–º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∞—è –Ω–æ–≥–∞','ü¶∂':'—Å—Ç—É–ø–Ω—è','üëÇ':'—É—Ö–æ','ü¶ª':'—Å–ª—É—Ö–æ–≤–æ–π –∞–ø–ø–∞—Ä–∞—Ç','üëÉ':'–Ω–æ—Å','üß†':'–º–æ–∑–≥ brain','ü´Ä':'—Å–µ—Ä–¥—Ü–µ –æ—Ä–≥–∞–Ω','ü´Å':'–ª–µ–≥–∫–∏–µ','ü¶∑':'–∑—É–±','ü¶¥':'–∫–æ—Å—Ç—å','üëÄ':'–≥–ª–∞–∑–∞ eyes','üëÅÔ∏è':'–≥–ª–∞–∑ eye','üëÖ':'—è–∑—ã–∫ tongue','üëÑ':'–≥—É–±—ã —Ä–æ—Ç mouth','üë∂':'–º–ª–∞–¥–µ–Ω–µ—Ü baby','üßí':'—Ä–µ–±–µ–Ω–æ–∫','üë¶':'–º–∞–ª—å—á–∏–∫ boy','üëß':'–¥–µ–≤–æ—á–∫–∞ girl','üßë':'—á–µ–ª–æ–≤–µ–∫ adult','üë±':'–±–ª–æ–Ω–¥–∏–Ω','üë®':'–º—É–∂—á–∏–Ω–∞ man','üßî':'–±–æ—Ä–æ–¥–∞','üë©':'–∂–µ–Ω—â–∏–Ω–∞ woman','üßì':'–ø–æ–∂–∏–ª–æ–π —á–µ–ª–æ–≤–µ–∫','üë¥':'–¥–µ–¥—É—à–∫–∞ old man','üëµ':'–±–∞–±—É—à–∫–∞ old woman','üê∂':'—Å–æ–±–∞–∫–∞ dog','üê±':'–∫–æ—à–∫–∞ cat','üê≠':'–º—ã—à—å','üêπ':'—Ö–æ–º—è–∫','üê∞':'–∫—Ä–æ–ª–∏–∫ rabbit bunny','ü¶ä':'–ª–∏—Å–∞ fox','üêª':'–º–µ–¥–≤–µ–¥—å bear','üêº':'–ø–∞–Ω–¥–∞','üê®':'–∫–æ–∞–ª–∞','üêØ':'—Ç–∏–≥—Ä','ü¶Å':'–ª–µ–≤','üêÆ':'–∫–æ—Ä–æ–≤–∞','üê∑':'—Å–≤–∏–Ω—å—è pig','üê∏':'–ª—è–≥—É—à–∫–∞','üêµ':'–æ–±–µ–∑—å—è–Ω–∞ monkey','üêî':'–∫—É—Ä–∏—Ü–∞','üêß':'–ø–∏–Ω–≥–≤–∏–Ω','üê¶':'–ø—Ç–∏—Ü–∞ bird','üê§':'—Ü—ã–ø–ª–µ–Ω–æ–∫','ü¶ã':'–±–∞–±–æ—á–∫–∞','üêõ':'–≥—É—Å–µ–Ω–∏—Ü–∞','üê∫':'–≤–æ–ª–∫','üêó':'–∫–∞–±–∞–Ω','üê¥':'–ª–æ—à–∞–¥—å','ü¶ì':'–∑–µ–±—Ä–∞','ü¶í':'–∂–∏—Ä–∞—Ñ','üêò':'—Å–ª–æ–Ω','ü¶è':'–Ω–æ—Å–æ—Ä–æ–≥','üê™':'–≤–µ—Ä–±–ª—é–¥','üê´':'–¥–≤—É–≥–æ—Ä–±—ã–π –≤–µ—Ä–±–ª—é–¥','üêøÔ∏è':'–±–µ–ª–∫–∞','ü¶î':'–µ–∂','üêæ':'—Å–ª–µ–¥—ã –ª–∞–ø','üåµ':'–∫–∞–∫—Ç—É—Å','üéÑ':'–µ–ª–∫–∞ christmas tree','üå≤':'—Ö–≤–æ–π–Ω–æ–µ –¥–µ—Ä–µ–≤–æ','üå≥':'–ª–∏—Å—Ç–≤–µ–Ω–Ω–æ–µ –¥–µ—Ä–µ–≤–æ','üå¥':'–ø–∞–ª—å–º–∞','üå±':'—Ä–æ—Å—Ç–æ–∫','üåø':'—Ç—Ä–∞–≤–∞','‚òòÔ∏è':'—Ç—Ä–∏–ª–∏—Å—Ç–Ω–∏–∫','üçÄ':'—á–µ—Ç—ã—Ä–µ—Ö–ª–∏—Å—Ç–Ω–∏–∫ —É–¥–∞—á–∞','üéç':'–±–∞–º–±—É–∫','üéã':'–±–∞–º–±—É–∫','üçÉ':'–ª–∏—Å—Ç—å—è –Ω–∞ –≤–µ—Ç—Ä—É','üçÇ':'–æ–ø–∞–≤—à–∏–µ –ª–∏—Å—Ç—å—è','üçÅ':'–∫–ª–µ–Ω–æ–≤—ã–π –ª–∏—Å—Ç','üçÑ':'–≥—Ä–∏–±','üêö':'—Ä–∞–∫—É—à–∫–∞','üåæ':'—Ä–∏—Å','üíê':'–±—É–∫–µ—Ç','üå∑':'—Ç—é–ª—å–ø–∞–Ω','üåπ':'—Ä–æ–∑–∞','ü•Ä':'—É–≤—è–¥—à–∏–π —Ü–≤–µ—Ç–æ–∫','üå∫':'–≥–∏–±–∏—Å–∫—É—Å','üå∏':'—Ü–≤–µ—Ç–æ–∫ –≤–∏—à–Ω–∏ —Å–∞–∫—É—Ä–∞','üåº':'—Ä–æ–º–∞—à–∫–∞','üåª':'–ø–æ–¥—Å–æ–ª–Ω—É—Ö','üåû':'—Å–æ–ª–Ω—Ü–µ –ª–∏—Ü–æ','üåé':'–∞–º–µ—Ä–∏–∫–∞','üåç':'–µ–≤—Ä–æ–ø–∞ –∞—Ñ—Ä–∏–∫–∞','üåè':'–∞–∑–∏—è –∞–≤—Å—Ç—Ä–∞–ª–∏—è','üåï':'–ø–æ–ª–Ω–æ–ª—É–Ω–∏–µ','üåñ':'—É–±—ã–≤–∞—é—â–∞—è –ª—É–Ω–∞','üåó':'–ø–æ—Å–ª–µ–¥–Ω—è—è —á–µ—Ç–≤–µ—Ä—Ç—å –ª—É–Ω—ã','üåò':'—É–±—ã–≤–∞—é—â–∏–π –ø–æ–ª—É–º–µ—Å—è—Ü','üåë':'–Ω–æ–≤–æ–ª—É–Ω–∏–µ','üåí':'—Ä–∞—Å—Ç—É—â–∏–π –ø–æ–ª—É–º–µ—Å—è—Ü','üåì':'–ø–µ—Ä–≤–∞—è —á–µ—Ç–≤–µ—Ä—Ç—å –ª—É–Ω—ã','üåî':'—Ä–∞—Å—Ç—É—â–∞—è –ª—É–Ω–∞','üåô':'–ø–æ–ª—É–º–µ—Å—è—Ü','üåö':'–Ω–æ–≤–æ–ª—É–Ω–∏–µ –ª–∏—Ü–æ','üåõ':'–ø–µ—Ä–≤–∞—è —á–µ—Ç–≤–µ—Ä—Ç—å –ª—É–Ω—ã –ª–∏—Ü–æ','üåú':'–ø–æ—Å–ª–µ–¥–Ω—è—è —á–µ—Ç–≤–µ—Ä—Ç—å –ª—É–Ω—ã –ª–∏—Ü–æ','üí´':'–≥–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏–µ –∑–≤–µ–∑–¥—ã','‚≠ê':'–∑–≤–µ–∑–¥–∞ star','üåü':'—Å–≤–µ—Ç—è—â–∞—è—Å—è –∑–≤–µ–∑–¥–∞','‚ú®':'–±–ª–µ—Å—Ç–∫–∏ –º–∞–≥–∏—è sparkles','‚ö°':'–º–æ–ª–Ω–∏—è','üî•':'–æ–≥–æ–Ω—å –ø–ª–∞–º—è fire','üí•':'–≤–∑—Ä—ã–≤ collision','‚òÑÔ∏è':'–∫–æ–º–µ—Ç–∞','‚òÄÔ∏è':'—Å–æ–ª–Ω—Ü–µ','üå§Ô∏è':'—Å–æ–ª–Ω—Ü–µ –∑–∞ –æ–±–ª–∞–∫–æ–º','‚õÖ':'–æ–±–ª–∞—á–Ω–æ','üå•Ô∏è':'—Å–æ–ª–Ω—Ü–µ –∑–∞ –±–æ–ª—å—à–∏–º –æ–±–ª–∞–∫–æ–º','üå¶Ô∏è':'—Å–æ–ª–Ω—Ü–µ –∏ –¥–æ–∂–¥—å','üåà':'—Ä–∞–¥—É–≥–∞ rainbow','‚òÅÔ∏è':'–æ–±–ª–∞–∫–æ','üåßÔ∏è':'–¥–æ–∂–¥—å','‚õàÔ∏è':'–≥—Ä–æ–∑–∞','üå©Ô∏è':'–º–æ–ª–Ω–∏—è –∏ –æ–±–ª–∞–∫–æ','üå®Ô∏è':'—Å–Ω–µ–≥','üå¨Ô∏è':'–≤–µ—Ç–µ—Ä','üí®':'—Ä—ã–≤–æ–∫','üå™Ô∏è':'—Ç–æ—Ä–Ω–∞–¥–æ','üå´Ô∏è':'—Ç—É–º–∞–Ω','üåä':'–≤–æ–ª–Ω–∞','üíß':'–∫–∞–ø–ª—è','üí¶':'–∫–∞–ø–ª–∏ –ø–æ—Ç–∞','‚òî':'–∑–æ–Ω—Ç –¥–æ–∂–¥—å','üçè':'–∑–µ–ª–µ–Ω–æ–µ —è–±–ª–æ–∫–æ','üçé':'–∫—Ä–∞—Å–Ω–æ–µ —è–±–ª–æ–∫–æ','üçê':'–≥—Ä—É—à–∞','üçä':'–∞–ø–µ–ª—å—Å–∏–Ω –º–∞–Ω–¥–∞—Ä–∏–Ω','üçã':'–ª–∏–º–æ–Ω','üçå':'–±–∞–Ω–∞–Ω','üçâ':'–∞—Ä–±—É–∑','üçá':'–≤–∏–Ω–æ–≥—Ä–∞–¥','üçì':'–∫–ª—É–±–Ω–∏–∫–∞','üçà':'–¥—ã–Ω—è','üçí':'–≤–∏—à–Ω—è','üçë':'–ø–µ—Ä—Å–∏–∫','üçç':'–∞–Ω–∞–Ω–∞—Å','ü••':'–∫–æ–∫–æ—Å','ü•ù':'–∫–∏–≤–∏','üçÖ':'–ø–æ–º–∏–¥–æ—Ä','üçÜ':'–±–∞–∫–ª–∞–∂–∞–Ω','ü•ë':'–∞–≤–æ–∫–∞–¥–æ','ü•¶':'–±—Ä–æ–∫–∫–æ–ª–∏','ü•¨':'—Å–∞–ª–∞—Ç','ü•í':'–æ–≥—É—Ä–µ—Ü','üå∂Ô∏è':'–æ—Å—Ç—Ä—ã–π –ø–µ—Ä–µ—Ü','üåΩ':'–∫—É–∫—É—Ä—É–∑–∞','ü•ï':'–º–æ—Ä–∫–æ–≤—å','üßÑ':'—á–µ—Å–Ω–æ–∫','üßÖ':'–ª—É–∫','ü•î':'–∫–∞—Ä—Ç–æ—Ñ–µ–ª—å','üç†':'–±–∞—Ç–∞—Ç','ü•ê':'–∫—Ä—É–∞—Å—Å–∞–Ω','ü•Ø':'–±–µ–π–≥–ª','üçû':'—Ö–ª–µ–±','ü•ñ':'–±–∞–≥–µ—Ç','ü•®':'–∫—Ä–µ–Ω–¥–µ–ª—å','üßÄ':'—Å—ã—Ä','ü•ö':'—è–π—Ü–æ','üç≥':'—è–∏—á–Ω–∏—Ü–∞','üßà':'–º–∞—Å–ª–æ','ü•û':'–±–ª–∏–Ω—ã','üßá':'–≤–∞—Ñ–ª–∏','ü•ì':'–±–µ–∫–æ–Ω','ü•©':'–º—è—Å–æ —Å—Ç–µ–π–∫','üçó':'–∫—É—Ä–∏–Ω–∞—è –Ω–æ–∂–∫–∞','üçñ':'–º—è—Å–æ –Ω–∞ –∫–æ—Å—Ç–∏','ü¶¥':'–∫–æ—Å—Ç—å','üå≠':'—Ö–æ—Ç-–¥–æ–≥','üçî':'–±—É—Ä–≥–µ—Ä','üçü':'–∫–∞—Ä—Ç–æ—Ñ–µ–ª—å —Ñ—Ä–∏','üçï':'–ø–∏—Ü—Ü–∞ pizza','ü•™':'—Å—ç–Ω–¥–≤–∏—á','ü•ô':'–ø–∏—Ç–∞','üßÜ':'—Ñ–∞–ª–∞—Ñ–µ–ª—å','üåÆ':'—Ç–∞–∫–æ','üåØ':'–±—É—Ä—Ä–∏—Ç–æ','ü•ó':'—Å–∞–ª–∞—Ç','ü•´':'–∫–æ–Ω—Å–µ—Ä–≤—ã','üçù':'—Å–ø–∞–≥–µ—Ç—Ç–∏','üçú':'–ª–∞–ø—à–∞','üç≤':'—Å—É–ø','üçõ':'–∫–∞—Ä—Ä–∏','üç£':'—Å—É—à–∏','üç±':'–±–µ–Ω—Ç–æ','ü•ü':'–ø–µ–ª—å–º–µ–Ω—å','üç§':'–∫—Ä–µ–≤–µ—Ç–∫–∞','üçô':'—Ä–∏—Å–æ–≤—ã–π —à–∞—Ä–∏–∫','üçö':'—Ä–∏—Å','üçò':'–∫—Ä–µ–∫–µ—Ä','üç•':'–Ω–∞—Ä—É—Ç–æ–º–∞–∫–∏','ü•†':'–ø–µ—á–µ–Ω—å–µ —Å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ–º','ü•Æ':'–ª—É–Ω–Ω—ã–π –ø—Ä—è–Ω–∏–∫','üç¢':'–æ–¥—ç–Ω','üçß':'–±—Ä–∏—Ç—ã–π –ª–µ–¥','üç®':'–º–æ—Ä–æ–∂–µ–Ω–æ–µ','üç¶':'–º–æ—Ä–æ–∂–µ–Ω–æ–µ —Ä–æ–∂–æ–∫','ü•ß':'–ø–∏—Ä–æ–≥','üßÅ':'–∫–∞–ø–∫–µ–π–∫','üç∞':'–∫—É—Å–æ–∫ —Ç–æ—Ä—Ç–∞','üéÇ':'—Ç–æ—Ä—Ç –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è birthday','üçÆ':'–ø—É–¥–∏–Ω–≥','üç≠':'–ª–µ–¥–µ–Ω–µ—Ü','üç¨':'–∫–æ–Ω—Ñ–µ—Ç–∞','üç´':'—à–æ–∫–æ–ª–∞–¥','üçø':'–ø–æ–ø–∫–æ—Ä–Ω','üç©':'–ø–æ–Ω—á–∏–∫','üç™':'–ø–µ—á–µ–Ω—å–µ','üå∞':'–∫–∞—à—Ç–∞–Ω','ü•ú':'–∞—Ä–∞—Ö–∏—Å','üçØ':'–º–µ–¥','ü•õ':'–º–æ–ª–æ–∫–æ','üçº':'–±—É—Ç—ã–ª–æ—á–∫–∞','‚òï':'–∫–æ—Ñ–µ —á–∞–π hot beverage','üçµ':'—á–∞–π','üßÉ':'—Å–æ–∫','ü•§':'–Ω–∞–ø–∏—Ç–æ–∫','üç∂':'—Å–∞–∫–µ','üç∫':'–ø–∏–≤–æ','üçª':'–∫—Ä—É–∂–∫–∏ –ø–∏–≤–∞','ü•Ç':'—à–∞–º–ø–∞–Ω—Å–∫–æ–µ —Ç–æ—Å—Ç','üç∑':'–≤–∏–Ω–æ','ü•É':'–≤–∏—Å–∫–∏','üç∏':'–∫–æ–∫—Ç–µ–π–ª—å','üçπ':'—Ç—Ä–æ–ø–∏—á–µ—Å–∫–∏–π –Ω–∞–ø–∏—Ç–æ–∫','üßâ':'–º–∞—Ç–µ','üçæ':'—à–∞–º–ø–∞–Ω—Å–∫–æ–µ –±—É—Ç—ã–ª–∫–∞','üßä':'–ª–µ–¥','ü•Ñ':'–ª–æ–∂–∫–∞','üç¥':'–≤–∏–ª–∫–∞ –∏ –Ω–æ–∂','üçΩÔ∏è':'—Ç–∞—Ä–µ–ª–∫–∞'};
    
    const emojiData = { '–ù–µ–¥–∞–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ': getRecent(RECENT_EMOJI_KEY) };
    for(const category in emojiStrings) {
        emojiData[category] = emojiStrings[category].split(/(?:)/u).map(s => {
            return { s: s, k: emojiKeywords[s] || '' };
        });
    }
    
    const symbolsTab = document.getElementById('symbols-tab'), emojiTab = document.getElementById('emoji-tab'), symbolsContent = document.getElementById('symbols-content'), emojiContent = document.getElementById('emoji-content'), notification = document.getElementById('copy-notification'), searchInput = document.getElementById('symbol-search');

    const createGrid = (data, isEmoji) => {
        const fragment = document.createDocumentFragment();
        for (const category in data) {
            if (category === '–ù–µ–¥–∞–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ' && data[category].length === 0) continue;

            const categoryDiv = document.createElement('div');
            categoryDiv.className = 'mb-4 category-container';
            categoryDiv.dataset.category = category;
            categoryDiv.innerHTML = `<h3 class="text-lg font-semibold mb-2 border-b border-gray-300 dark:border-gray-600 pb-1 category-title">${category}</h3>`;
            
            const symbolsGrid = document.createElement('div');
            symbolsGrid.className = 'grid grid-cols-6 sm:grid-cols-8 md:grid-cols-10 gap-2';
            
            data[category].forEach(symbol => {
                const btn = document.createElement('button');
                const { d, s, c, t, k } = symbol;
                const display = d || s;
                const copy = c || s;
                btn.className = d ? 'flex items-center justify-center p-2 bg-gray-200 dark:bg-gray-700 rounded-lg hover:bg-blue-500 hover:text-white transition-colors text-sm' : 'flex items-center justify-center p-2 bg-gray-200 dark:bg-gray-700 rounded-lg hover:bg-blue-500 hover:text-white transition-colors text-xl';
                btn.textContent = display;
                btn.dataset.keywords = `${display} ${k || ''}`.toLowerCase();
                if(t) btn.title = t;
                
                btn.addEventListener('click', () => { 
                    const dataToSave = { s: display, c: copy, k: k || '', t: t, d: d };
                    const key = isEmoji ? RECENT_EMOJI_KEY : RECENT_SYMBOLS_KEY;
                    addToRecent(key, dataToSave);
                    navigator.clipboard.writeText(copy); 
                    notification.classList.remove('opacity-0'); 
                    if (timeoutId) clearTimeout(timeoutId); 
                    timeoutId = setTimeout(() => notification.classList.add('opacity-0'), 1000); 
                });
                symbolsGrid.appendChild(btn);
            });
            categoryDiv.appendChild(symbolsGrid);
            fragment.appendChild(categoryDiv);
        }
        return fragment;
    };
    
    symbolsContent.appendChild(createGrid(symbolsData, false));
    emojiContent.appendChild(createGrid(emojiData, true));
    
    searchInput.addEventListener('input', () => {
        const searchTerm = searchInput.value.toLowerCase().trim();
        document.querySelectorAll('#symbols-content, #emoji-content').forEach(content => {
            content.querySelectorAll('button').forEach(btn => {
                btn.classList.toggle('hidden', !btn.dataset.keywords.includes(searchTerm));
            });
            content.querySelectorAll('.category-container').forEach(container => {
                const hasVisibleButtons = !!container.querySelector('button:not(.hidden)');
                container.classList.toggle('hidden', !hasVisibleButtons);
            });
        });
    });
    
    const updateRecentTab = (contentEl, key, isEmoji) => {
        const recentData = {'–ù–µ–¥–∞–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ': getRecent(key)};
        let container = contentEl.querySelector('[data-category="–ù–µ–¥–∞–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ"]');
        if (container) container.remove();
        if (getRecent(key).length > 0) {
            const newGrid = createGrid(recentData, isEmoji);
            contentEl.prepend(newGrid);
        }
    };

    const switchTab = (active) => { 
        symbolsTab.classList.toggle('active', active === 'symbols'); 
        emojiTab.classList.toggle('active', active === 'emoji'); 
        symbolsContent.classList.toggle('hidden', active !== 'symbols'); 
        emojiContent.classList.toggle('hidden', active !== 'emoji'); 

        updateRecentTab(symbolsContent, RECENT_SYMBOLS_KEY, false);
        updateRecentTab(emojiContent, RECENT_EMOJI_KEY, true);
        
        searchInput.dispatchEvent(new Event('input'));
    };

    symbolsTab.addEventListener('click', () => switchTab('symbols'));
    emojiTab.addEventListener('click', () => switchTab('emoji'));
    switchTab('symbols');
}

export function cleanup() {
    if (timeoutId) clearTimeout(timeoutId);
}
